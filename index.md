# 情報通信

## Inter(相互接続された)Net(ネットワーク)
- 全世界規模のパケット効果網
- 自律分散型ネットワークシステム(LAN)をルータもより相互接続している。

## パケット通信方式
- データを分割し、通信パケットにして伝送する。
  - 送信者側は、データ(情報)を通信パケット(Packet)に分割する。
  - 受信者側は、通信パケットからデータを再構成する。
- 通信パケットにはヘッダ(Header)を付与して伝送する。
- ヘッダは相手の識別番号(Identifier)が設定されている。
  - TCP/IPのIPでは、IPアドレス(IP Address)

## ネットワークシステムの階層化
- 上下関係を持つ複数のプロトコルのより構成
  - 上位層は下位層を使って、より高度な通信を行う。
- 層間インターンフェースの標準化
  - 階層を抽象化する。
    - 階層毎に異なるプロトコルを用いることも可能である。
  - 現実的には、完全な抽象化は困難である。
- OSI参照モデル【7層モデル】との対応
  - TCP/IPは5層で定義されている。
- プロトコルスタック
  - 階層図ではプロトコルが積み重なって見える。
- 階層名とレイヤ
  - 下からレイヤnとも呼ばれている。
  - レイヤ3 ネットワーク層
  - レイヤ2 データリンク層
  - レイヤ1 物理層
  
プロトコルとインターフェース
○プロトコル(Protocol)
　・ノード間で通信を行うための取り決め
　・同一階層間のデータ(制御、情報)交換
○インターフェース(interface)
　・上下の階層間の取り決め
　・上下の階層間のデータ(制御、情報)交換	

## 通信の分類(コネクションの型)
- コネクション(指向)型プロトコル
  - 通信する前に、論理的な通信路(仮想回線、Virtual Circuit)を設定する。
  - 通信品質、透過性、順序が保証される。
  - 例：電話、TCP
- コネクション型プロトコル
  - いきなり送信する。
  - 通信品質は保証されない(最善努力型通信)
  - 例：通信、電報、郵便、IP、UDP、イーサネット

## 応用層(Application Layer)
- 応用プロセス(Application Process)間で送受信されるデータに関した通信機能を制御する。
  - OSI 参照モデルでは更に3層に分かれる。
- プロトコル例
  - HTTP,FTP,SMTP,POP3,IMAP4,telnet,DNS,NFS
  
## トランスポート層、ネットワーク層
- トランスポート層
  - 透過的に、終端ノード間での効率の良いデータ転送を行う。
  - 誤り制御、順序制御、フロー制御
  - TCP(信頼性のあるコネクション型プロトコル)
  - UDP (信頼性のないコネクション型プロトコル)
- ネットワーク層
  - 経路選択と中継選択を行う。
  - IP(信頼性のないコネクションレス型プロトコル)

## データリンク層、物理層
- データリンク層(Datalink Layer,Layer 2)
  - 隣接するノード間でのデータ転送制御
    - 同一LAN内のノード間の通信
  - 物理層と一体になって規定されていることが多い。
    - イーサネットの制御(ソフトウェア)部分。
    - PPP(Point to Point Protocol)
- 物理層(Physical Layer)
  - 電気的、物理的な信号の制御
  - イーサネットのケーブルやトポロジィの規格
  - 具体例
    - イーサネットの物理(ハードウェア)部分。
    - 電話回線(アナログ、ISDN、ADSL)

## ネットワーク層　IPv4(Internet Protocol)
- ネットワーク層のプロトコル
  - ルータ(ゲートウェイ)によりLAN間を接続する。
- 主な機能は経路選択と中継制御
  - PCでも経路選択表が必要である。
- コネクションレス(Cnection Less)型
  - 最前努力型(Best effort)で、破壊されることもある。
- アドレス(ホストを識別するユニークな番号)は32ビット
  - 割り当て可能なアドレスは枯渇した。
  
## IPv4アドレス
- ホストを識別する番号
  - 32ビットユニークな番号
  - インターネット内に同じIPv4アドレスを設定したホストが、2台以上存在できない。
- IPv4アドレスの表記
  - 32ビットを1オクテット
- ※単位に10進数で表記する。
  - 0xac19012b⇨172.25.1.45
- 区切りは’ . ’

## IPv4アドレスのビット構成
- ネットワーク部(上位ビット)
  - ネットワーク(LAN)に割り当てる。
- ホスト部(下位ビット)
  - ネットワーク(LAN)内の各ホスト(ノード)に割り当てる。
- ネットワークの規模(LAN内のホスト数)により、ネットワーク部とホスト部のビット配分を調整する。
  - アドレスのネットワーク部によりグループ(LAN)を区別する。
  - グループ化することでアドレスを集約し、経路情報を節約する。
- 割り当て可能なホスト数は2(h)-2
  - h:ホスト部のビット数
    - ルータ(ゲートウェイ)もホストとして数える
- n:ネットワーク部のビット数はn=32-h
- 2個のIPv4アドレスはホストには使用できない。
  - 例は172.25.0.0/16、クラスB,h＝16
  - ネットワーク(LAN)のIPv4アドレス(ホスト部が全て0)
    - 例：172.25.0.0
  - 同一LAN内へのブロードキャストIPv4アドレス(ホスト部が全て1)
    - 例：172.25.255.255
    
## IPv4のクラスレス(Class Less)アドレス
- ネットワーク部のビット数を明示する。
- ビット指示方式
  - /<n>
    - 例:/24(255.255.255.0)と同じ
- サブネットマスク(Subnet Mask)指示方式
  - ネットワーク部として残すビットを1とする。
  - 例:255.255.255.0,0xfffff00(/24と同じ)

## 特別なIPv4アドレス
- ネットワーク(LAN)アドレス
  - ホスト部の全ビットが0、例:172.25.0.0
- 指定したネットワークへのブロードキャスト(BC)
  - ホスト部の全ビットが1、例:172.255.255.255
- ローカルネットワークへのブロードキャスト(BC)
  - 全ビットが1、例:255.255.255.255
- ループバック(LB)・アドレス
  - 127.0.0.1
